<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard | JobLink</title>
  <link rel="stylesheet" href="seeker_dashboard.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="logo">
        <i class="fas fa-handshake"></i>
        <span>JobLink</span>
      </div>
      <ul class="nav-links">
        <li><a href="#" class="nav-link active">Dashboard</a></li>
        <li><a href="browse_jobs.html" class="nav-link">Browse Jobs</a></li>
        <li><a href="applied_jobs.html" class="nav-link">Applications</a></li>
        <li><a href="seeker_edit_profile.html" class="nav-link">Profile</a></li>
        <li class="nav-divider"></li>
        <li><a href="login.html" class="nav-link" id="logoutBtn">Logout</a></li>
      </ul>
      <div class="hamburger">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>
    </div>
  </nav>

  <!-- Dashboard Main Content -->
  <div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="dashboard-sidebar">
      <!-- User Profile Summary -->
      <div class="profile-summary">
        <div class="profile-avatar">
          <img src="https://i.pravatar.cc/100?img=5" alt="Profile" id="userAvatar">
          <div class="online-status"></div>
        </div>
        <div class="profile-info">
          <h3 id="userName">Loading...</h3>
          <p class="user-title" id="userTitle">Loading...</p>
          <p class="user-location" id="userLocation">Loading...</p>
        </div>
        <div class="profile-stats">
          <div class="stat-item">
            <span class="stat-number" id="appliedJobs">0</span>
            <span class="stat-label">Applied</span>
          </div>
          <div class="stat-item">
            <span class="stat-number" id="matchedJobs">0</span>
            <span class="stat-label">Matches</span>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <h4>Quick Actions</h4>
        <button class="action-btn" onclick="location.href='seeker_edit_profile.html'">
          <i class="fas fa-user-edit"></i>
          Update Profile
        </button>
        <button class="action-btn" onclick="location.href='browse_jobs.html'">
          <i class="fas fa-search"></i>
          Browse All Jobs
        </button>
        <button class="action-btn" id="refreshMatchesBtn">
          <i class="fas fa-sync-alt"></i>
          Refresh Matches
        </button>
      </div>

      <!-- Profile Completion -->
      <div class="profile-completion-card">
        <h4>Profile Completion</h4>
        <div class="completion-progress">
          <div class="progress-bar">
            <div class="progress-fill" id="profileProgressFill"></div>
          </div>
          <span class="completion-percent" id="profileCompletion">0%</span>
        </div>
        <p>Complete your profile for better job matches</p>
        <button class="btn-edit-qualifications" onclick="location.href='seeker_edit_profile.html'">
          <i class="fas fa-edit"></i>
          Improve Profile
        </button>
      </div>

      <!-- Skills & Qualifications -->
      <div class="qualifications-card">
        <h4>My Qualifications</h4>
        <div class="qualifications-list">
          <div class="qualification-item">
            <strong>Education:</strong>
            <span id="userEducation">Loading...</span>
          </div>
          <div class="qualification-item">
            <strong>Experience:</strong>
            <span id="userExperience">Loading...</span>
          </div>
          <div class="qualification-item">
            <strong>Skills:</strong>
            <div class="skills-tags" id="userSkills">
              <span class="skill-tag">Loading...</span>
            </div>
          </div>
        </div>
        <button class="btn-edit-qualifications" onclick="location.href='seeker_edit_profile.html'">
          <i class="fas fa-edit"></i>
          Edit Qualifications
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="dashboard-main">
      <!-- Dashboard Header -->
      <div class="dashboard-header">
        <div class="header-content">
          <h1 id="greetingMessage">Welcome back!</h1>
          <p id="dashboardSubtitle">Jobs matching your qualifications will appear here</p>
        </div>
        <div class="header-actions">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="jobSearch" placeholder="Search matching jobs...">
          </div>
          <div class="filter-dropdown">
            <select id="jobFilter">
              <option value="all">All Matches</option>
              <option value="full-time">Full-time</option>
              <option value="part-time">Part-time</option>
              <option value="remote">Remote</option>
              <option value="contract">Contract</option>
              <option value="internship">Internship</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Stats Cards -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-briefcase"></i>
          </div>
          <div class="stat-content">
            <h3 id="totalMatches">0</h3>
            <p>Job Matches</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-paper-plane"></i>
          </div>
          <div class="stat-content">
            <h3 id="totalApplications">0</h3>
            <p>Applications Sent</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-eye"></i>
          </div>
          <div class="stat-content">
            <h3 id="profileViews">0</h3>
            <p>Profile Views</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-star"></i>
          </div>
          <div class="stat-content">
            <h3 id="matchScore">0%</h3>
            <p>Avg. Match Score</p>
          </div>
        </div>
      </div>

      <!-- Matching Jobs Feed -->
      <section class="jobs-section">
        <div class="section-header">
          <h2>Jobs Matching Your Profile</h2>
          <div class="matching-info">
            <span class="match-badge">AI-Powered Matching</span>
            <span class="match-count" id="matchCount">Loading matches...</span>
          </div>
        </div>

        <!-- Jobs Feed -->
        <div class="jobs-feed" id="jobsFeed">
          <div class="loading-state" id="jobsLoading">
            <div class="loading-spinner"></div>
            <p>Finding jobs that match your profile...</p>
          </div>
          <!-- Jobs will be dynamically inserted here -->
        </div>
      </section>

      <!-- Recent Applications -->
      <section class="applications-section">
        <div class="section-header">
          <h2>Recent Applications</h2>
          <a href="applied_jobs.html" class="view-all">View All</a>
        </div>
        <div class="applications-list" id="applicationsList">
          <div class="loading-state" id="applicationsLoading">
            <div class="loading-spinner"></div>
            <p>Loading your applications...</p>
          </div>
          <!-- Applications will be dynamically inserted here -->
        </div>
      </section>
    </main>
  </div>

  <!-- Job Application Modal -->
  <div class="modal" id="applicationModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Apply for <span id="modalJobTitle"></span></h3>
        <button type="button" class="modal-close" id="closeApplicationModal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="application-form">
          <div class="form-group">
            <label for="applicationMessage">Cover Letter (Optional)</label>
            <textarea id="applicationMessage" rows="4" placeholder="Tell the employer why you're a good fit for this position..."></textarea>
          </div>
          <div class="form-group">
            <label class="checkbox-container">
              <input type="checkbox" id="attachResume" checked>
              <span class="checkmark"></span>
              Attach my resume from profile
            </label>
          </div>
          <div class="application-actions">
            <button class="btn btn-outline" id="cancelApplication">Cancel</button>
            <button class="btn btn-primary" id="submitApplication">
              <span class="btn-text">Submit Application</span>
              <div class="btn-loader">
                <div class="loader"></div>
              </div>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="seeker_dashboard.js"></script>
</body>
</html>